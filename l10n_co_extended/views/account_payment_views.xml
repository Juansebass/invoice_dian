<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="view_account_payment_form_inherit_account_extended" model="ir.ui.view">
          <field name="name">account.payment.form.inherit.account.extended</field>
          <field name="model">account.payment</field>
          <field name="priority" eval="40"/>
          <field name="inherit_id" ref="account.view_account_payment_form"/>
          <field name="arch" type="xml">
              <xpath expr="//field[@name='date']" position="before">
                  <field name="payment_exchange_allow_ok" invisible="True"/>
                  <field name="currency_rate"/>
                  <field name="payment_has_exchange_rate"
                         groups="base.group_multi_currency"
                         attrs="{
                                'invisible': [('payment_exchange_allow_ok','=',False)],
                                'readonly': [('state','!=','draft')],
                         }"/>
                  <field name="payment_exchange_rate" groups="base.group_multi_currency"
                         attrs="{
                                'invisible': [('payment_has_exchange_rate','=',False)],
                                'readonly': [('state','!=','draft')],
                         }"/>
              </xpath>
              <xpath expr="//field[@name='date']" position="before">
                  <field name="amount_signed" groups="base.group_multi_currency"
                         attrs="{'invisible': [('payment_exchange_allow_ok','=',False)]}" readonly="True"/>
                  <field name="company_currency_id" invisible="1"/>
              </xpath>
              <xpath expr="//field[@name='journal_id']" position="after">
                  <field name="analytic_account_id" groups="account.group_account_user"/>
              </xpath>
              <!--<xpath expr="//field[@name='move_id']" position="after">
                    <field name="full_reconcile_ids" attrs="{'invisible': [('full_reconcile_ids','=',[])],}"/>
                </xpath>-->
          </field>
        </record>
	<record id="view_account_payment_register_form_inherit_account_extended" model="ir.ui.view">
            <field name="name">account.payment.form.inherit.account.extended"</field>
            <field name="model">account.payment.register</field>
            <field name="priority" eval="40"/>
            <field name="inherit_id" ref="account.view_account_payment_register_form"/>
            <field name="arch" type="xml">
                <xpath expr="//group[1]" position="before">
                    <field name="message_amount_exceeded" invisible="1"/>
                    <div 
                        class="alert alert-info" 
                        role="alert" 
                        style="margin-bottom:0px;" 
                        attrs="{'invisible': [('message_amount_exceeded','!=', True)]}">
                        El monto del pago no puede superar el saldo de la factura
                    </div>
                </xpath>
                <xpath expr="//field[@name='communication']" position="after">
                    <field name="advance_ok"/>
                    <label for="payment_has_exchange_rate"/>
                    <div name="payment_has_exchange_rate_div" class="d-flex">
                        <field name="payment_has_exchange_rate" groups="base.group_multi_currency"/>
                    </div>
                    <label for="payment_exchange_rate" attrs="{'invisible': [('payment_has_exchange_rate', '=', False)]}"/>
                    <div name="payment_exchange_rate_div" class="d-flex" attrs="{'invisible': [('payment_has_exchange_rate', '=', False)]}">
                        <field name="payment_exchange_rate" groups="base.group_multi_currency"/>
                    </div>
                </xpath>
            </field>
        </record>
    </data>
</odoo>